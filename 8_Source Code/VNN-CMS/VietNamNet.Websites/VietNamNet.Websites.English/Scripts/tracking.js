/* tracking Article*/
var serviceArticle_post_url='http://tracking.english.vietnamnet.vn/tracking/t.srv?'+'sn=article&dm=english.vietnamnet.vn&us=me&vs=1'+'&aid=[ARITCLEID]&catalias=[CATEGORYALIAS]';tempArticle='<div class="container"></div><iframe src="" class="post" style="display:none;"></iframe>';
function bindArticleTracking(a,b,c){$('#'+a).html(tempArticle);$('#'+a+' .post').attr({src:serviceArticle_post_url.replace("[ARITCLEID]",b).replace("[CATEGORYALIAS]",c),title:"post"})}function showArticleTracking(){$('div[articleTracking=true]').each(function(a){bindArticleTracking(this.id,$(this).attr('articleId'),$(this).attr('categoryalias'))})};VietNamNet.Framework.JS.Initialization.add(showArticleTracking);

/* Module Survey */
var srvSurvey_posturl='http://tracking.english.vietnamnet.vn/tracking/t.srv?'+'sn=survey&dm=english.vietnamnet.vn&us=me&vs=1'+'&randId=[RANDOMID]&surveyId=[SURVEYID]&itemId=[ITEMID]';var srvSurvey_url="/ajax/Survey/get/g.html";var tempOptionC='<div class=\"vote_item\"><label><input type=\"checkbox\" id=\"itemId\" name=\"itemId\" value=\"{SurveyOptionId}\"> {OptionName}</label></div>';var tempOptionR="<div class=\"vote_item\"><label><input type=\"radio\" id=\"itemId\" name=\"itemId\" value=\"{SurveyOptionId}\"> {OptionName}</label></div>";var tempButton='<a href=\"#\" id=\"LINK_ID\"  onclick=\"LINK_EVENT\" class="action"></a>';var tempDialog='<div id=\"dias{SurveyId}\" class=\"jqmWindow diaResult\">Please wait... <img alt=\"loading\" src=\"/Images/busy.gif\"></div>';var temp='<div class=\"vote_most\"> '+'<div class=\"vote_most_title\">POLLING</div>'+' <div class=\"vote_most_list\"> '+'<div class=\"vote_question\"> {Question} </div>'+'<div class=\"vote_most_item options_{SurveyId}\"></div>'+'<div class=\"vote_respost\"><a href="javascript:void(0);" id=\"action_{SurveyId}\" class="action"  > </a></div>'+' </div>'+'</div><img id="cmdPostSurvey" />';var tempResult="<div class=\"vote_most\"> "+"<div class=\"vote_most_title\">Result</div>"+" <div class=\"vote_most_list\"> "+"<div class=\"vote_question\"> {Question} </div>"+"<div class=\"vote_most_item survey result_{SurveyId}\"></div>"+"<div class=\"vote_respost\"><a href=\"#\" id=\"action_{SurveyId}\"  > </a> </div>"+" </div>"+"</div><a href=\"#\" class=\"jqmClose\"></a>";var tempResultDetail=" <div class=\"vote_item1 sitem\">"+"<div style=\"width: 55%; \">"+"<label class=\"label\">{OptionName}</label>"+"</div>"+"<div style=\"width: 25%; \">"+"<div class=\"result\" style=\"width:{ResultPercent}\"></div>"+"</div>"+"<div style=\"width: 10%; text-align:right; \">{ResultPercent}</div>"+"<div style=\"width: 10%; text-align:right; \">{Result}/SumResult</div>"+"</div>";function showResult(a,b){if(a){var c=new VietNamNet.Framework.JS.Template({id:'tmpR',template:tempResult});VietNamNet.Framework.JS.TemplateManager.bind($('#'+b+' .diaResult'),a,c);var d=new VietNamNet.Framework.JS.Template({id:'tmpD',template:tempResultDetail.replace(/SumResult/gi,a.SumResult)});VietNamNet.Framework.JS.TemplateManager.bind($('.result_'+a.SurveyId,$('#'+b+' .diaResult')),a.SurveyOption,d)}};function bind(a,b){if(a){var c=new VietNamNet.Framework.JS.Template({id:'tmpQ',template:temp+tempDialog});VietNamNet.Framework.JS.TemplateManager.bind(b,a,c);var d=new VietNamNet.Framework.JS.Template({id:'tmpO',template:a.OptionType=="C"?tempOptionC:tempOptionR});VietNamNet.Framework.JS.TemplateManager.bind($('#'+b+" .options_"+a.SurveyId),a.SurveyOption,d);if(Survey_checkCookie(a.SurveyId)==false||a.HasVoted==false){$('#'+b+' .action').text("Vote");$('#'+b+' .action').click(function(){return validateSubmit(a.SurveyId,b)})}else{$('#'+b+' input ').attr("disabled","disabled");$('#'+b+' .action').text("View result");$('#'+b+' .action').unbind('click');showResult(a,b);$('#'+b+' .diaResult ').jqm({trigger:'#'+b+' .action'})}}};function showSurvey(c,d,e,f){VietNamNet.Framework.JS.AjaxManager.add({url:srvSurvey_url,data:{categorysalias:d,articleid:e,divId:c,surveyid:f},success:function(a){var b=VietNamNet.Framework.JS.JSON.decode(a);bind(b,c)}})};function showAllSurveyBySurvey(){$('div[survey=true]').each(function(a){showSurvey(this.id,'','',$(this).attr('surveyId'))})};function showAllSurveyByArticle(){$('div[survey=true]').each(function(a){showSurvey(this.id,'',$(this).attr('articleId'),'')})};function showAllSurveyByCat(){$('div[survey=true]').each(function(a){showSurvey(this.id,$(this).attr('categoryalias'),'','')})};function showAllSurvey(){$('div[survey=true]').each(function(a){showSurvey(this.id,$(this).attr('categoryalias'),$(this).attr('articleId'),$(this).attr('surveyId'))})};VietNamNet.Framework.JS.Initialization.add(showAllSurvey);function validateSubmit(a,b){var d=$('#'+b);if($('#'+b+' :input[checked=true]').length>0){submitPoll(a,b);return false}alert('Please chose an option!');return false};function submitPoll(a,b){items=[];var f=$('#'+b+' :input[checked=true]');for(var i=0;i<f.length;i++){items.push(f[i].value)}var c=srvSurvey_posturl.replace("[RANDOMID]",Math.random()).replace("[SURVEYID]",a).replace("[ITEMID]",items.join(','));$('#'+b+' #cmdPostSurvey').attr({src:c,title:"post"});Survey_setCookie(a);$('#'+b+' input ').attr("disabled","disabled");$('#'+b+' .action').text("View result");$('#'+b+' .action').unbind('click');$('#'+b+' .diaResult ').jqm({trigger:'#'+b+' .action'})};function Survey_setCookie(a){c_name='Survey_'+a;var b=new Date();b.setDate(b.getDate()+1);document.cookie=c_name+"=true"+";expires="+b.toUTCString()};function Survey_getCookie(a){c_name='Survey_'+a;if(document.cookie.length>0){c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1)c_end=document.cookie.length;return true}}return false}function Survey_checkCookie(a){return Survey_getCookie(a)}

/* Module Comment (feedback) */
var service_post_url='http://tracking.english.vietnamnet.vn/tracking/t.srv?'+'sn=comment&dm=english.vietnamnet.vn&us=me&vs=1'+'&n=[NAME]&m=[MESSAGE]&s=[SUBJECT]&p=[PHONE]&em=[EMAIL]&v=[VALIDCODE]&aid=[ARTICLE]';function postComment(){var a=$('#newcomment .name').val();if(a.length<=1||a=='Name'){$('#newcomment .mess').html('Please input your name!');$('#newcomment .name').focus();return false};var b=$('#newcomment .subject').val();if(b.length<=1||b=='Subject'){$('#newcomment .mess').html('Please input your subject!');$('#newcomment .subject').focus();return false};var c=$('#newcomment .mail').val();if(checkemail(c)!=true){$('#newcomment .mess').html('Email invalid. Please input your email!');$('#newcomment .mail').focus();return false};var d=$('#newcomment .phone').val();if(checkphone(d)!=true){$('#newcomment .mess').html('Phone number invalid. Please input your phone!');$('#newcomment .phone').focus();return false};var e=$('#newcomment .message').val();if(e.length<=5||e.length>1000||e=='Message'){$('#newcomment .mess').html('Please input your message!');$('#newcomment .message').focus();return false};var f=$('#newcomment .aid').val();var g=$('#newcomment .validcode').val();$("#newcomment #cmdPostComment").attr({src:service_post_url.replace("[NAME]",a).replace("[SUBJECT]",b).replace("[PHONE]",d).replace("[EMAIL]",c).replace("[MESSAGE]",e).replace("[ARTICLE]",f),title:"post"});$("#newcomment #cmdPostComment").attr({src:service_post_url.replace("[NAME]",a).replace("[SUBJECT]",b).replace("[PHONE]",d).replace("[EMAIL]",c).replace("[MESSAGE]",e).replace("[ARTICLE]",f),title:"post"});$('#newcomment .mess').html('Thanks for your reply!');$('#newcomment .subject').val('').blur();$('#newcomment .message').val('').blur();$('#newcomment .validcode').val('').attr('value','')}function resetComment(){$('#newcomment .name').val('').blur();$('#newcomment .phone').val('').blur();$('#newcomment .mail').val('').blur();$('#newcomment .subject').val('').blur();$('#newcomment .message').val('').blur();$('#newcomment .validcode').val('').blur()}$(document).ready(function(){$("#article-feedback .article-freedback-form").hide();var a=false;$('#article-feedback .article-freedback-title span').click(function(){$('#article-feedback .article-freedback-title').toggleClass('article-freedback-title2');if(a){a=false;$('#article-feedback .article-freedback-form').slideUp('slow')}else{a=true;$('#article-feedback .article-freedback-form').slideDown('slow')}})});var service_get_url="/ajax/getComment/get.html";var tempComment=' '+'<div class="pd5 list"></div>'+'<div class="pdt5 bortop cm-page">'+'&nbsp; <a href="javascript:void(0)" class="paging-prev">Prev</a> '+'&nbsp; <a href="javascript:void(0)" class="paging-next">Next</a> '+'<br class="clear" />'+'</div>';var tempCommentItem='<div class="coment-item">'+'<div class="feerback-top">&nbsp;</div>'+'<div class="feerback-body">'+'<div class="pdtb5 bold">{Subject}  </div>'+'<div class="pdtb5 bortop">{Detail}</div>'+'</div>'+'<div class="feerback-bottom">&nbsp;</div>'+'<div class="feerback-user">'+'<font class="bold red52">{Name}</font> - {Email}'+'</div>'+'</div>';var CurrentPageIndex=0;function bindComment(a,b,c){if(a){$('#'+c).html(tempComment);var d=new VietNamNet.Framework.JS.Template({id:'tmpComment',template:tempCommentItem});VietNamNet.Framework.JS.TemplateManager.bind($('#'+c+' .list'),a,d);$('#'+c+' .paging-next').show();$('#'+c+' .paging-next').click(function(){CurrentPageIndex++;showComment(b,CurrentPageIndex,c)});if(!CurrentPageIndex||CurrentPageIndex<=0){$('#'+c+' .paging-prev').hide()}else{$('#'+c+' .paging-prev').show();$('#'+c+' .paging-prev').click(function(){CurrentPageIndex--;showComment(b,CurrentPageIndex,c)})}}else{$('#'+c+' .paging-next').hide()}}function prevComment(){pageIndex--;initComment()}function nextComment(){pageIndex++;initComment()}function showComment(d,e,f){VietNamNet.Framework.JS.AjaxManager.add({url:service_get_url,data:{m:d,index:e},success:function(a){var b='';if(a&&a!='""'&&a!='null'){b=a.trim()}else{$('#'+f).hide();return};var c=VietNamNet.Framework.JS.JSON.decode(b);if(c){bindComment(c,d,f)}else{$('#'+f+' .paging-next').hide()}},error:function(){$('#'+f+' .paging-prev').hide();$('#'+f+' .paging-next').hide()}});return false}function initComment(){$('div[comment=true]').each(function(a){showComment($(this).attr('articleId'),0,this.id)})}VietNamNet.Framework.JS.Initialization.add(initComment);

