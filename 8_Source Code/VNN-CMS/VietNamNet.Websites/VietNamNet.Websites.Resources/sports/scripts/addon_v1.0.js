/* module Survey */
var srvSurvey_posturl='http://Tracking.thethao.vietnamnet.vn/tracking/t.srv?'+'sn=survey&dm=thethao.vietnamnet.vn&us=me&vs=1'+'&randId=[RANDOMID]&surveyId=[SURVEYID]&itemId=[ITEMID]';var srvSurvey_url="/ajax/Survey/get/g.html";var tempOptionC='<div class=\"vote-anser\"><label><input type=\"checkbox\" id=\"itemId\" name=\"itemId\" value=\"{SurveyOptionId}\"> {OptionName}</label></div>';var tempOptionR="<div class=\"vote-anser\"><label><input type=\"radio\" id=\"itemId\" name=\"itemId\" value=\"{SurveyOptionId}\"> {OptionName}</label></div>";var tempButton='<a href=\"#\" id=\"LINK_ID\"  onclick=\"LINK_EVENT\" class="action"></a>';var tempDialog='<div id=\"dias{SurveyId}\" class=\"jqmWindow diaResult\">Please wait... <img alt="loading" src="http://res.vietnamnet.vn/sports/images/busy.gif"></div>';var temp='<div class="bbc-box"><div class="bbc-top">&nbsp;</div><div class="pdlr5 ">'+'<div class="box-item-title"><a href="#">Trưng cầu ý kiến</a></div> <div class="pd10">'+'<div class="vote-ques">   {Question}   </div>'+'<div class=\"vote_most_item options_{SurveyId}\"></div>'+'<div class="vote-tool"><a href="javascript:void(0);" id=\"action_{SurveyId}\" class="action"  > </a></div>'+'</div></div><div class="bbc-bottom">&nbsp;<img id="cmdPostSurvey" /></div></div>';var tempResult='<div class="vote_most"> '+'<div class="pvt-title"><a href="#"><img src="http://res.vietnamnet.vn/images/blank.gif" width="30px" height="24px" /></a></div>'+'<div class="pvt-ques pd10"> {Question} </div>'+' <div class="pvt-ans"> '+'<div class=\"pvt-ans survey result_{SurveyId}\"></div>'+'<div class=\"vote_respost\"><a href=\"#\" id=\"action_{SurveyId}\"  > </a> </div>'+'<div class="pvt-total">Tổng số bình chọn : <span class="red">{SumResult}</span> lượt</div>'+' </div>'+'</div><a href=\"#\" class=\"jqmClose \"></a>';var tempResultDetail='<div class="pvt-item">'+' <div class="pvt-item1">{OptionName} </div>'+'<div class="pvt-item2">'+'<div class="bieudo{index}" style="width: {ResultPercent}">&nbsp;</div> {ResultPercent}'+'</div>'+'<div class="pvt-item3">{Result}/SumResult</div><br class="clear"  />'+'</div>';var tempResultDetail2=' <div class=\"sitem pvt-item1\">'+'<div style=\"width: 55%; \">'+'<label class=\"label\">{OptionName}</label>'+'</div>'+'<div style=\"width: 25%; \">'+'<div class=\"result\" style=\"width:{ResultPercent}\"></div>'+'</div>'+'<div style=\"width: 10%; text-align:right; \">{ResultPercent}</div>'+'<div style=\"width: 10%; text-align:right; \">{Result}/SumResult</div>'+"</div>";function showResult(a,b){if(a){var c=new VietNamNet.Framework.JS.Template({id:'tmpR',template:tempResult});VietNamNet.Framework.JS.TemplateManager.bind($('#'+b+' .diaResult'),a,c);var d=new VietNamNet.Framework.JS.Template({id:'tmpD',template:tempResultDetail.replace(/SumResult/gi,a.SumResult)});VietNamNet.Framework.JS.TemplateManager.bind($('.result_'+a.SurveyId,$('#'+b+' .diaResult')),a.SurveyOption,d)}};function showSurvey(c,d,e,f){VietNamNet.Framework.JS.AjaxManager.add({url:srvSurvey_url,data:{categorysalias:d,articleid:e,divId:c,surveyid:f},success:function(a){var b=VietNamNet.Framework.JS.JSON.decode(a);bind(b,c)}})};function showAllSurveyBySurvey(){$('div[survey=true]').each(function(a){showSurvey(this.id,'','',$(this).attr('surveyId'))})};function showAllSurveyByArticle(){$('div[survey=true]').each(function(a){showSurvey(this.id,'',$(this).attr('articleId'),'')})};function showAllSurveyByCat(){$('div[survey=true]').each(function(a){showSurvey(this.id,$(this).attr('categoryalias'),'','')})};function showAllSurvey(){$('div[survey=true]').each(function(a){showSurvey(this.id,$(this).attr('categoryalias'),$(this).attr('articleId'),$(this).attr('surveyId'))})};VietNamNet.Framework.JS.Initialization.add(showAllSurvey);function bind(a,b){if(a){if(a.SurveyOption&&a.SurveyOption.length&&a.SurveyOption.length>0){for(var i=0;i<a.SurveyOption.length;i++)a.SurveyOption[i].index=i+1}var c=new VietNamNet.Framework.JS.Template({id:'tmpQ',template:temp+tempDialog});VietNamNet.Framework.JS.TemplateManager.bind(b,a,c);var d=new VietNamNet.Framework.JS.Template({id:'tmpO',template:a.OptionType=="C"?tempOptionC:tempOptionR});VietNamNet.Framework.JS.TemplateManager.bind($('#'+b+" .options_"+a.SurveyId),a.SurveyOption,d);if(Survey_checkCookie(a.SurveyId)||a.HasVoted){$('#'+b+' input ').attr("disabled","disabled");$('#'+b+' .action').text("Xem kết quả");$('#'+b+' .action').unbind('click');showResult(a,b);$('#'+b+' .diaResult ').jqm({trigger:'#'+b+' .action'})}else{$('#'+b+' .action').text("Bỏ phiếu");showResult(a,b);$('#'+b+' .action').click(function(){return validateSubmit(a.SurveyId,b)})}}}function validateSubmit(a,b){var d=$('#'+b);if($('#'+b+' :input[checked=true]').length>0){submitPoll(a,b);return false}alert('Bạn vui lòng chọn một lựa chọn trước khi gửi!');return false};function submitPoll(a,b){items=[];var f=$('#'+b+' :input[checked=true]');for(var i=0;i<f.length;i++){items.push(f[i].value)}var c=srvSurvey_posturl.replace("[RANDOMID]",Math.random()).replace("[SURVEYID]",a).replace("[ITEMID]",items.join(','));$('#'+b+' #cmdPostSurvey').attr({src:c,title:"post"});Survey_setCookie(a);$('#'+b+' input ').attr("disabled","disabled");$('#'+b+' .action').text("Xem kết quả");$('#'+b+' .action').unbind('click');$('#'+b+' .diaResult ').jqm({trigger:'#'+b+' .action'})};    

/* module Survey Games */
VietNamNet.Framework.JS.SurveyGame1=function(){};VietNamNet.Framework.JS.SurveyGame1.prototype={temp:'<div class="bbc-box game-box"><div class="bbc-top">&nbsp;</div><div class="pdlr5 ">'+'<div class="box-item-title"><a href="#">Trò chơi</a></div> '+'<div class="pd10">'+'<div class="vote-anser"><label class="label w70" for="stName">Họ tên <span class="red">*</span>: </label>         <input type="text" name="stName" class="w150 sName" ></div> <br class="clear"/>'+'<div class="vote-anser"><label class="label w70" for="stIndentity">CMND <span class="red">*</span>:</label>           <input type="text" name="stIndentity" class="w150 sIndentity" ></div> <br class="clear"/>'+'<div class="vote-anser"><label class="label w70" for="stPhone">Điện thoại <span class="red">*</span>:</label>     <input type="text" name="stPhone" class="w150 sPhone" ></div> <br class="clear"/>'+'<div class="vote-anser"><label class="label w70" for="stEmail">Email <span class="red">*</span>:</label>     <input type="text" name="stEmail" class="w150 sEmail" ></div> <br class="clear"/>'+'<div class="vote-anser"><label class="label w70" for="stAddress">Địa chỉ :</label>        <input type="text" name="stAddress" class="w150 sAddress" ></div> <br class="clear"/>'+'<div class="vote-ques">   {Question}   </div>'+'<div class=\"vote_most_item options_{SurveyId}\"></div>'+'<div class="red mess"></div>'+'<div class="vote-tool"><a href="javascript:void(0);" id=\"action_{SurveyId}\" class="action"  > </a></div>'+'</div></div><div class="bbc-bottom">&nbsp;<img id="cmdPostSurvey" />'+'</div>'+'</div>',posturl:'http://Tracking.thethao.vietnamnet.vn/tracking/t.srv?'+'sn=survey&dm=thethao.vietnamnet.vn&us=me&vs=1'+'&randId=[RANDOMID]&surveyId=[SURVEYID]&itemId=[ITEMID]'+'&name=[NAME]&identityCard=[INDENTITYCARD]&address=[ADDRESS]&email=[EMAIL]',config:{domainname:'d',tracking:''},id:'',postUrl:'',init:function(a){this.config=$.extend(this.config,a)},bindGame:function(a,b){var c=this;if(a){var d=new VietNamNet.Framework.JS.Template({id:'tmpQ',template:c.temp});VietNamNet.Framework.JS.TemplateManager.bind(b,a,d);var e=new VietNamNet.Framework.JS.Template({id:'tmpO',template:a.OptionType=="C"?tempOptionC:tempOptionR});VietNamNet.Framework.JS.TemplateManager.bind($('#'+b+" .options_"+a.SurveyId),a.SurveyOption,e);$('#'+b+' .action').text("Gửi");$('#'+b+' .action').click(function(){return c.validate(a.SurveyId,b)})}},showGame:function(c,d){var e=this;VietNamNet.Framework.JS.AjaxManager.add({url:srvSurvey_url,data:{categorysalias:0,articleid:d,divId:c,surveyid:0},success:function(a){var b=VietNamNet.Framework.JS.JSON.decode(a);e.bindGame(b,c)}})},showAllGame:function(){var b=this;$('div[surveygame=true]').each(function(a){b.showGame(this.id,$(this).attr('articleId'))})},validate:function(a,b){var c=this;var d=$('#'+b);var e=$('#'+b+' .mess');e.html('');var f=$('.sName',d);if(!f.val()||f.val().length<2){e.html('Bạn hãy điền Họ tên trước khi gửi!');f.focus();return false}var g=$('.sIndentity',d);if(g.val().length<9 || g.val().length>10){e.html('Bạn hãy điền CMND trước khi gửi!');g.focus();return false}var h=$('.sPhone',d);if(checkphone(h.val())!=true){h.focus();e.html('Bạn hãy điền Số điện thoại trước khi gửi!');return false}var i=$('.sEmail',d);if(checkemail(i.val())!=true){i.focus();e.html('Bạn hãy điền đúng Email trước khi gửi!');return false}if($('input[checked=true]',d).length>0){c.submitSend(a,b)}else{e.html('Hãy chọn một lựa chọn trước khi gửi!');return false}},submitSend:function(a,b){var c=this;items=[];var f=$('#'+b+' :input[checked=true]');var d=$('#'+b);var e=$('#'+b+' .mess');var g=$('.sName',d).val();var h=$('.sIndentity',d).val();var j=$('.sPhone',d).val();var k=$('.sEmail',d).val();for(var i=0;i<f.length;i++){items.push(f[i].value)}var l=c.posturl.replace("[RANDOMID]",Math.random()).replace("[SURVEYID]",a).replace("[ITEMID]",items.join(',')).replace("[NAME]",g).replace("[INDENTITYCARD]",h).replace("[ADDRESS]",j).replace("[EMAIL]",k);$(' #cmdPostSurvey',d).attr({src:l,title:"post"});Survey_setCookie(a);$(' input ',d).attr("disabled","disabled");$('#'+b+' .action').unbind('click');e.html('Thông tin đã được gửi. Cám ơn bạn đã tham gia!')}};function showGame(){var a=new VietNamNet.Framework.JS.SurveyGame1();a.showAllGame()}VietNamNet.Framework.JS.Initialization.add(showGame);function Survey_checkCookie(a){return Survey_getCookie(a)};function Survey_setCookie(a){c_name='Survey_'+a;var b=new Date();b.setTime(b.getTime()+15);document.cookie=c_name+"=true"+";expires="+b.toUTCString()};function Survey_getCookie(a){c_name='Survey_'+a;if(document.cookie.length>0){c_start=document.cookie.indexOf(c_name+"=");if(c_start!=-1){c_start=c_start+c_name.length+1;c_end=document.cookie.indexOf(";",c_start);if(c_end==-1)c_end=document.cookie.length;return true}}return false}



/* module Comment (feedback) */
var service_post_url='http://Tracking.thethao.vietnamnet.vn/tracking/t.srv?'+'sn=comment&dm=thethao.vietnamnet.vn&us=me&vs=1'+'&n=[NAME]&m=[MESSAGE]&s=[SUBJECT]&p=[PHONE]&em=[EMAIL]&v=[VALIDCODE]&aid=[ARTICLE]';function postComment(){var a=$('#newcomment .name').val();if(a.length<=2||a=='Họ và tên *'){$('#newcomment .mess').html('Bạn vui lòng nhập Họ tên!');$('#newcomment .name').focus();return false};var b=$('#newcomment .email').val();if(checkemail(b)!=true){$('#newcomment .mess').html('Sai định dạng Email. Bạn vui lòng email!');$('#newcomment .email').focus();return false};var c=$('#newcomment .phone').val();if(checkphone(c)!=true){$('#newcomment .mess').html('Sai định dạng số điện thoại. Bạn vui lòng nhập số điện thoại!');$('#newcomment .phone').focus();return false};var d=$('#newcomment .subject').val();if(d.length<=2||d=='Tiêu đề'){$('#newcomment .mess').html('Bạn vui lòng nhập Tiêu đề!');$('#newcomment .subject').focus();return false};var e=$('#newcomment .message').val();if(e.length<=5||e.length>1000||e=='Nội dung'){$('#newcomment .mess').html('Bạn vui lòng nhập nội dung phản hồi!');$('#newcomment .message').focus();return false};var f=$('#newcomment .aid').val();var g=$('#newcomment .validcode').val();$("#newcomment #cmdPostComment").attr({src:service_post_url.replace("[NAME]",a).replace("[SUBJECT]",d).replace("[PHONE]",c).replace("[EMAIL]",b).replace("[MESSAGE]",e).replace("[ARTICLE]",f),title:"post"});$('#newcomment .mess').html('Cám ơn bạn đã phản hồi!');$('#newcomment .subject').val('').blur();$('#newcomment .message').val('').blur();$('#newcomment .validcode').val('').attr('value','')}function resetComment(){$('#newcomment .name').attr('value','');$('#newcomment .phone').attr('value','');$('#newcomment .email').attr('value','');$('#newcomment .subject').attr('value','');$('#newcomment .message').attr('value','');$('#newcomment .validcode').attr('value','')}var service_get_url="/ajax/getComment/get.html";var tempComment=' '+'<div id="feedback-title" class="home-article-comment-box" >'+'<div id="feedback-sort"></div>'+'<div class="fb_title"><h2>Ý kiến bạn đọc</h2></div>'+'<div class="clear">,</div>'+'</div>'+'<div  id="feedback-list" class="list"></div>'+'<div id="paging" class="pagy cm-page">'+'&nbsp; <a href="javascript:void(0)" class="paging-prev">Trang trước</a> '+'&nbsp; <a href="javascript:void(0)" class="paging-next">Trang sau</a> '+'<br class="clear" />'+'</div>';var tempCommentItem='<div class="feedback-item">'+'<div class="comment"><i>{Subject}</i><br>{Detail}</div>'+'<div class="profile"><b>{Name}</b>, gửi lúc {CreatedDate} </div>'+'</div>';var CurrentPageIndex=1;function bindComment(a,b,c){if(a){$('#'+c).html(tempComment);var d=new VietNamNet.Framework.JS.Template({id:'tmpComment',template:tempCommentItem});VietNamNet.Framework.JS.TemplateManager.bind($('#'+c+' .list'),a,d);$('#'+c+' .paging-next').show();$('#'+c+' .paging-next').click(function(){CurrentPageIndex++;showComment(b,CurrentPageIndex,c)});if(!CurrentPageIndex||CurrentPageIndex<=1){$('#'+c+' .paging-prev').hide()}else{$('#'+c+' .paging-prev').show();$('#'+c+' .paging-prev').click(function(){CurrentPageIndex--;showComment(b,CurrentPageIndex,c)})}}else{$('#'+c+' .paging-next').hide()}}function prevComment(){pageIndex--;initComment()}function nextComment(){pageIndex++;initComment()}function showComment(d,e,f){VietNamNet.Framework.JS.AjaxManager.add({url:service_get_url,data:{m:d,index:e},success:function(a){var b='';if(a&&a!='""'&&a!='null'){b=a.trim()}else{if(e>1)$('#'+f+' .paging-next').hide();else $('#'+f).hide();return};var c=VietNamNet.Framework.JS.JSON.decode(b);if(c){bindComment(c,d,f)}else{$('#'+f+' .paging-next').hide()}},error:function(){$('#'+f+' .paging-prev').hide();$('#'+f+' .paging-next').hide()}});return false};function initComment(){$('div[comment=true]').each(function(a){showComment($(this).attr('articleId'),0,this.id)})}VietNamNet.Framework.JS.Initialization.add(initComment);


/* Comment - show/hide box  */
$(function(){$("div.article-freedback-form",$('#newcomment')).hide();$("div.fb_title",$('#newcomment')).click(function(){if($("div.article-freedback-form",$('#newcomment')).toggleClass('hidden').hasClass('hidden')){$("h2 a",$(this)).attr("class","down");$("div.article-freedback-form",$('#newcomment')).slideUp('slow')}else{$("h2 a",$(this)).attr("class","up");$("div.article-freedback-form",$('#newcomment')).slideDown('slow')}return false})});

/* module Article */
var serviceArticle_post_url='http://Tracking.thethao.vietnamnet.vn/tracking/t.srv?'+'sn=article&dm=thethao.vietnamnet.vn&us=me&vs=1'+'&aid=[ARITCLEID]&catalias=[CATEGORYALIAS]';tempArticle='<div class="container"></div><iframe src="" class="post" style="display:none;"></iframe>';function bindArticleTracking(a,b,c){a.html(tempArticle);var s=serviceArticle_post_url.replace("[ARITCLEID]",b).replace("[CATEGORYALIAS]",c);$('.post',a).attr('src',s)};function showArticleTracking(){$('div[articleTracking=true]').each(function(){bindArticleTracking($(this),$(this).attr('articleId'),$(this).attr('categoryalias'))})};VietNamNet.Framework.JS.Initialization.add(showArticleTracking);



